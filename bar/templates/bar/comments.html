{% extends "bar/base.html" %}
{% load staticfiles %}


{% block extra_headers %}        
<link rel="stylesheet" type="text/css" href="{% static 'bar/comments.css' %}">
<script src="{% static 'bar/comment.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row comment-body">
        <div class="comment сol-sm-6 сol-sm-offset-3 col-md-8 col-md-offset-2">
            <div class="img col-sm-4">
               <img src="{% static 'images/dom.png' %}" width="300px" height="130px">
            </div>
            <div class="col-sm-6 col-sm-offset-2 diag">
                <span class="st-span">Отлично</span>
                <div class="progress">
                    <span>{{five|length}}</span>
                    <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="10" style="width: {{five|length}}%;"> </div>
                </div>
                <span class="st-span">Хорошо</span>
                <div class="progress">
                    <span>{{four|length}}</span>
                    <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="10" style="width: {{four|length}}%;"></div>
                </div>
                <span class="st-span">Неплохо</span>
                <div class="progress">
                    <span>{{three|length}}</span>
                    <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="10" style="width: {{three|length}}%;"></div>
                </div>
                <span class="st-span">Плохо</span>
                <div class="progress">
                    <span>{{two|length}}</span>
                    <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="10" style="width: {{two|length}}%;"></div>
                </div>
                 <span class="st-span">Ужасно</span>
                <div class="progress">
                    <span>{{one|length}}</span>
                    <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="10" style="width: {{one|length}}%;"></div>
                </div>
            </div>
        </div>
        <div class="comment сol-sm-6 сol-sm-offset-3 col-md-8 col-md-offset-2">
            <div><h1 class="header-com">Ваши отзывы:</h1><a class="fl btn btn-success" href="#form">Оставить отзыв</a></div>
            {% for comment in comments %}
            <div class="comment-id сol-sm-6">
                <div class="row">
                    <div class="col-sm-2">
                        <div class="user">
                            <img src="{{comment.image.url}}" width="60px" height="60px">
                            <strong>{{ comment.author }}</strong> 
                        </div>
                    </div>
                    <div class="col-sm-9 ">
                        <div class="likes" id="id{{comment.comment_like}}">
                            <div class="like1" id="l1"></div>
                            <div class="like1" id="l2"></div>
                            <div class="like1" id="l3"></div>
                            <div class="like1" id="l4"></div>
                            <div class="like1" id="l5"></div>
                        </div>   
                        <div class="date"> Отзыв написан {{ comment.created_date|date:"d-m-Y"}} {{ comment.created_date|time:"H:i" }}</div>
                        <p class="com-pad-header">"{{ comment.header }}"</p>
                        <p class="com-pad">{{ comment.text }}</p>
                    </div>
                </div>
            </div>
            {% empty %}
            <h3>Будь первым, кто оставит комментарий!</h3>
            {% endfor %}
            </div>
            <div class="comment сol-sm-6 сol-sm-offset-3 col-md-8 col-md-offset-2">
                <div class="paginator">
                        {% if comments.has_other_pages %}
                            <nav aria-label="Page navigation">
                                <ul class="pagination">
                                    <li>
                                        <a aria-label="Previous" href="{% url "comments" %}?page=1&amp;">&laquo;
                                        </a>
                                    </li>
                                    {% for p in comments.paginator.page_range %}
                                    <li {% if comments.number == p %} class="active" {% endif %}>
                                        <a href="{% url 'comments' %}?page={{ p }}&amp;">{{ p }}</a></li>
                                    {% endfor %}
                                    <li>
                                        <a href="{% url 'comments' %}?page={{comments.paginator.num_pages }}&amp;">&raquo;
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        {% endif %}
                </div>
            </div>
        <div class="new-comment col-sm-6 col-sm-offset-3">
            <h3 class="text-header">Оставить отзыв</h3>
            <form class="form-horizontal" id="form" method="post" enctype="multipart/form-data" action="{% url 'add_comment' %}">{% csrf_token %}
                <div class="form-group">
                    <div class="left"><img src="{% static 'images/like.png' %}" width="20px" height="20px">Ваша общая оценка этого ресторана</div>
                </div>
                <div class="form-group">
                    <div class="likes">
                        <div class="like1" id="like1" data-item='1'></div>
                        <div class="like1" id="like2" data-item='2'></div>
                        <div class="like1" id="like3" data-item='3'></div>
                        <div class="like1" id="like4" data-item='4'></div>
                        <div class="like1" id="like5" data-item='5'></div>
                    </div>
                    <div id="ratingFlag" >
                        <em id="em">Нажмите, чтобы оценить</em>
                    </div>
                </div>
                {{ form.comment_like }}
                <div class="form-group">
                    <label  class="col-sm-4 control-label">Ваше имя: </label>
                    <div class="col-sm-8">
                        {{form.author}}
                        {{ form.author.errors }}
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4 control-label">Фото: </label>
                    <div class="col-sm-8">
                        {{form.image}}
                        {{ form.emage.errors }}
                    </div>
                </div>
                 <div class="form-group">
                    <label  class="col-sm-4 control-label">Заголовок: </label>
                    <div class="col-sm-8">
                        {{form.header}}
                        {{ form.header.errors }}
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4 control-label">Комментарий: </label>
                    <div class="col-sm-8">
                        {{form.text}}
                        {{ form.text.errors }}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="submit" class="btn btn-success">Отправить</button>
                    </div>
                </div> 
            </form>
        </div>
    </div>
</div> 
{% endblock%}